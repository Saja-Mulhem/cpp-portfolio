#include <iostream>
#include <fstream>
#include <vector>
#include <string>

using namespace std;

// === ØªØ¹Ø±ÙŠÙ Ø£Ù„ÙˆØ§Ù† ANSI ===
#define RESET   "\033[0m"
#define RED     "\033[31m"
#define GREEN   "\033[32m"
#define YELLOW  "\033[33m"
#define BLUE    "\033[34m"
#define CYAN    "\033[36m"

// === ØªØ¹Ø±ÙŠÙ Ø¨Ù†ÙŠØ© Ø§Ù„Ù…Ù‡Ù…Ø© ===
struct Task {
    string title;
    string description;
};

// === Ù…ØªØºÙŠØ± Ø¹Ø§Ù… Ù„Ø­ÙØ¸ Ø§Ù„Ù…Ù‡Ø§Ù… ===
vector<Task> tasks;

// === ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù‡Ø§Ù… Ù…Ù† Ø§Ù„Ù…Ù„Ù ===
void loadTasks() {
    ifstream file("tasks.txt");
    if (!file) return; // Ø¥Ø°Ø§ Ù„Ù… ÙŠÙˆØ¬Ø¯ Ø§Ù„Ù…Ù„Ù
    Task task;
    while (getline(file, task.title) && getline(file, task.description)) {
        tasks.push_back(task);
    }
    file.close();
}

// === Ø­ÙØ¸ Ø§Ù„Ù…Ù‡Ø§Ù… ÙÙŠ Ø§Ù„Ù…Ù„Ù ===
void saveTasks() {
    ofstream file("tasks.txt");
    for (auto &task : tasks) {
        file << task.title << endl << task.description << endl;
    }
    file.close();
}

// === Ø¥Ø¶Ø§ÙØ© Ù…Ù‡Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø© ===
void addTask() {
    Task task;
    cout << CYAN << "ğŸ“ Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ù‡Ù…Ø©: " << RESET;
    cin.ignore();
    getline(cin, task.title);
    cout << CYAN << "ğŸ’¬ Ø£Ø¯Ø®Ù„ ÙˆØµÙ Ø§Ù„Ù…Ù‡Ù…Ø©: " << RESET;
    getline(cin, task.description);
    tasks.push_back(task);
    saveTasks();
    cout << GREEN << "âœ… ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù‡Ù…Ø© Ø¨Ù†Ø¬Ø§Ø­!\n" << RESET;
}

// === Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù‡Ø§Ù… ===
void listTasks() {
    if (tasks.empty()) {
        cout << RED << "âš ï¸ Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù‡Ø§Ù… Ø¨Ø¹Ø¯.\n" << RESET;
        return;
    }
    cout << BLUE << "\nğŸ“‹ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù‡Ø§Ù…:\n" << RESET;
    for (size_t i = 0; i < tasks.size(); ++i)
        cout << YELLOW << i + 1 << ". " << RESET
             << tasks[i].title << " - " << tasks[i].description << endl;
}

// === Ø­Ø°Ù Ù…Ù‡Ù…Ø© ===
void deleteTask() {
    int index;
    cout << CYAN << "âŒ Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ù…Ù‡Ù…Ø© Ø§Ù„ØªÙŠ ØªØ±ÙŠØ¯ Ø­Ø°ÙÙ‡Ø§: " << RESET;
    cin >> index;
    if (index < 1 || index > (int)tasks.size()) {
        cout << RED << "â— Ø±Ù‚Ù… ØºÙŠØ± ØµØ§Ù„Ø­.\n" << RESET;
        return;
    }
    tasks.erase(tasks.begin() + index - 1);
    saveTasks();
    cout << GREEN << "ğŸ—‘ï¸ ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù‡Ù…Ø© Ø¨Ù†Ø¬Ø§Ø­.\n" << RESET;
}

// === Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© ===
int main() {
    loadTasks();
    int choice;
    do {
        cout << BLUE << "\n--- Ù…Ø¯ÙŠØ± Ø§Ù„Ù…Ù‡Ø§Ù… ---\n" << RESET;
        cout << YELLOW << "1. Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù‡Ø§Ù…\n" << RESET;
        cout << YELLOW << "2. Ø¥Ø¶Ø§ÙØ© Ù…Ù‡Ù…Ø©\n" << RESET;
        cout << YELLOW << "3. Ø­Ø°Ù Ù…Ù‡Ù…Ø©\n" << RESET;
        cout << YELLOW << "0. Ø®Ø±ÙˆØ¬\n" << RESET;
        cout << CYAN << "Ø§Ø®ØªÙŠØ§Ø±Ùƒ: " << RESET;
        cin >> choice;

        switch (choice) {
            case 1: listTasks(); break;
            case 2: addTask(); break;
            case 3: deleteTask(); break;
            case 0: cout << GREEN << "ğŸ‘‹ ÙˆØ¯Ø§Ø¹Ù‹Ø§!\n" << RESET; break;
            default: cout << RED << "â— Ø®ÙŠØ§Ø± ØºÙŠØ± ØµØ§Ù„Ø­.\n" << RESET;
        }
    } while (choice != 0);

    return 0;
}
